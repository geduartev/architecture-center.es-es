---
title: Patrón Sidecar
description: Implemente componentes de una aplicación en un proceso o contenedor independientes para proporcionar aislamiento y encapsulación.
author: dragon119
ms.date: 06/23/2017
ms.openlocfilehash: ec168009aa99f412c3f1222a1c404ea4ea5cb669
ms.sourcegitcommit: b0482d49aab0526be386837702e7724c61232c60
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/14/2017
---
# <a name="sidecar-pattern"></a><span data-ttu-id="7acae-103">Patrón Sidecar</span><span class="sxs-lookup"><span data-stu-id="7acae-103">Sidecar pattern</span></span>

<span data-ttu-id="7acae-104">Implemente componentes de una aplicación en un proceso o contenedor independientes para proporcionar aislamiento y encapsulación.</span><span class="sxs-lookup"><span data-stu-id="7acae-104">Deploy components of an application into a separate process or container to provide isolation and encapsulation.</span></span> <span data-ttu-id="7acae-105">Este patrón también puede habilitar las aplicaciones compuestas de tecnologías y componentes heterogéneos.</span><span class="sxs-lookup"><span data-stu-id="7acae-105">This pattern can also enable applications to be composed of heterogeneous components and technologies.</span></span>

<span data-ttu-id="7acae-106">Este patrón se denomina *Sidecar* porque parece un sidecar acoplado a una motocicleta.</span><span class="sxs-lookup"><span data-stu-id="7acae-106">This pattern is named *Sidecar* because it resembles a sidecar attached to a motorcycle.</span></span> <span data-ttu-id="7acae-107">En el patrón, el sidecar está acoplado a una aplicación primaria y proporciona funciones auxiliares para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7acae-107">In the pattern, the sidecar is attached to a parent application and provides supporting features for the application.</span></span> <span data-ttu-id="7acae-108">El sidecar también comparte el mismo ciclo de vida que la aplicación primaria, se crea y se retira junto con el elemento primario.</span><span class="sxs-lookup"><span data-stu-id="7acae-108">The sidecar also shares the same lifecycle as the parent application, being created and retired alongside the parent.</span></span> <span data-ttu-id="7acae-109">El patrón Sidecar a veces se denomina patrón Sidekick y es un patrón jerárquico.</span><span class="sxs-lookup"><span data-stu-id="7acae-109">The sidecar pattern is sometimes referred to as the sidekick pattern and is a decomposition pattern.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="7acae-110">Contexto y problema</span><span class="sxs-lookup"><span data-stu-id="7acae-110">Context and Problem</span></span>

<span data-ttu-id="7acae-111">A menudo las aplicaciones y lo servicios requieren una funcionalidad relacionada, como la supervisión, el registro, la configuración y los servicios de red.</span><span class="sxs-lookup"><span data-stu-id="7acae-111">Applications and services often require related functionality, such as monitoring, logging, configuration, and networking services.</span></span> <span data-ttu-id="7acae-112">Estas tareas periféricas se pueden implementar como componentes o servicios independientes.</span><span class="sxs-lookup"><span data-stu-id="7acae-112">These peripheral tasks can be implemented as separate components or services.</span></span> 

<span data-ttu-id="7acae-113">Si están estrechamente integradas en la aplicación, se pueden ejecutar en el mismo proceso que la aplicación, que realiza un uso eficaz de los recursos compartidos.</span><span class="sxs-lookup"><span data-stu-id="7acae-113">If they are tightly integrated into the application, they can run in the same process as the application, making efficient use of shared resources.</span></span> <span data-ttu-id="7acae-114">Sin embargo, esto también significa que no están bien aisladas y una interrupción en uno de estos componentes puede afectar a otros componentes o a toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7acae-114">However, this also means they are not well isolated, and an outage in one of these components can affect other components or the entire application.</span></span> <span data-ttu-id="7acae-115">Además, normalmente deben implementarse con el mismo idioma que la aplicación primaria.</span><span class="sxs-lookup"><span data-stu-id="7acae-115">Also, they usually need to be implemented using the same language as the parent application.</span></span> <span data-ttu-id="7acae-116">Como consecuencia, el componente y la aplicación tienen una gran dependencia entre ellos.</span><span class="sxs-lookup"><span data-stu-id="7acae-116">As a result, the component and the application have close interdependence on each other.</span></span>

<span data-ttu-id="7acae-117">Si la aplicación se descompone en servicios, cada uno de ellos se puede crear con distintos idiomas y tecnologías.</span><span class="sxs-lookup"><span data-stu-id="7acae-117">If the application is decomposed into services, then each service can be built using different languages and technologies.</span></span> <span data-ttu-id="7acae-118">Aunque esto proporciona más flexibilidad, significa que cada componente tiene sus propias dependencias y requiere bibliotecas específicas del lenguaje para acceder tanto a la plataforma subyacente como a los recursos compartidos con la aplicación primaria.</span><span class="sxs-lookup"><span data-stu-id="7acae-118">While this gives more flexibility, it means that each component has its own dependencies and requires language-specific libraries to access the underlying platform and any resources shared with the parent application.</span></span> <span data-ttu-id="7acae-119">Además, la implementación de estas características como servicios independientes puede agregar latencia a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7acae-119">In addition, deploying these features as separate services can add latency to the application.</span></span> <span data-ttu-id="7acae-120">La administración del código y las dependencias de estas interfaces específicas del lenguaje también puede agregar una considerable complejidad, especialmente en lo referente al hospedaje, la implementación y la administración.</span><span class="sxs-lookup"><span data-stu-id="7acae-120">Managing the code and dependencies for these language-specific interfaces can also add considerable complexity, especially for hosting, deployment, and management.</span></span>

## <a name="solution"></a><span data-ttu-id="7acae-121">Solución</span><span class="sxs-lookup"><span data-stu-id="7acae-121">Solution</span></span>

<span data-ttu-id="7acae-122">Coloque un conjunto de tareas cohesionadas con la aplicación principal, pero colóquelas en su propio proceso o contenedor, lo que proporciona una interfaz homogénea para los servicios de plataformas de varios lenguajes.</span><span class="sxs-lookup"><span data-stu-id="7acae-122">Co-locate a cohesive set of tasks with the primary application, but place them inside their own process or container, providing a homogeneous interface for platform services across languages.</span></span> 

![](./_images/sidecar.png)

<span data-ttu-id="7acae-123">Un servicio sidecar no necesariamente forma parte de la aplicación, pero está conectado a ella.</span><span class="sxs-lookup"><span data-stu-id="7acae-123">A sidecar service is not necessarily part of the application, but is connected to it.</span></span> <span data-ttu-id="7acae-124">Va allá donde vaya la aplicación primaria.</span><span class="sxs-lookup"><span data-stu-id="7acae-124">It goes wherever the parent application goes.</span></span> <span data-ttu-id="7acae-125">Estos son tipos de procesos o servicios auxiliares que se implementan con la aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="7acae-125">Sidecars are supporting processes or services that are deployed with the primary application.</span></span> <span data-ttu-id="7acae-126">En el caso de las motocicletas, el sidecar está acoplado a una motocicleta y cada motocicleta puede tener su propio sidecar.</span><span class="sxs-lookup"><span data-stu-id="7acae-126">On a motorcycle, the sidecar is attached to one motorcycle, and each motorcycle can have its own sidecar.</span></span> <span data-ttu-id="7acae-127">De la misma forma, un servicio sidecar comparte el destino de su aplicación primaria.</span><span class="sxs-lookup"><span data-stu-id="7acae-127">In the same way, a sidecar service shares the fate of its parent application.</span></span> <span data-ttu-id="7acae-128">Para cada instancia de la aplicación, se implementa una instancia del patrón Sidecar, y se hospeda junto a ella.</span><span class="sxs-lookup"><span data-stu-id="7acae-128">For each instance of the application, an instance of the sidecar is deployed and hosted alongside it.</span></span> 

<span data-ttu-id="7acae-129">Entre las ventajas de usar un patrón Sidecar se incluyen:</span><span class="sxs-lookup"><span data-stu-id="7acae-129">Advantages of using a sidecar pattern include:</span></span>

- <span data-ttu-id="7acae-130">Un patrón Sidecar es independiente de su aplicación principal en cuanto al entorno del runtime y al lenguaje de programación, por lo que no es preciso desarrollar un sidecar por lenguaje.</span><span class="sxs-lookup"><span data-stu-id="7acae-130">A sidecar is independent from its primary application in terms of runtime environment and programming language, so you don't need to develop one sidecar per language.</span></span> 

- <span data-ttu-id="7acae-131">El sidecar puede acceder a los mismos recursos que la aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="7acae-131">The sidecar can access the same resources as the primary application.</span></span> <span data-ttu-id="7acae-132">Por ejemplo, un sidecar puede supervisar los recursos del sistema que usan tanto el sidecar como la aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="7acae-132">For example, a sidecar can monitor system resources used by both the sidecar and the primary application.</span></span> 

- <span data-ttu-id="7acae-133">Dada su proximidad a la aplicación principal, la latencia de la comunicación entre ellos no es significativa.</span><span class="sxs-lookup"><span data-stu-id="7acae-133">Because of its proximity to the primary application, there’s no significant latency when communicating between them.</span></span>

- <span data-ttu-id="7acae-134">Hasta en las aplicaciones que no proporcionan un mecanismo de extensibilidad se puede usar un sidecar para ampliar la funcionalidad, para lo que se adjunta como proceso propio proceso en el mismo host o subcontenedor que la aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="7acae-134">Even for applications that don’t provide an extensibility mechanism, you can use a sidecar to extend functionality by attaching it as own process in the same host or sub-container as the primary application.</span></span>

<span data-ttu-id="7acae-135">A menudo, el patrón Sidecar se usa con contenedores y se conoce como contenedor sidecar o contenedor sidekick.</span><span class="sxs-lookup"><span data-stu-id="7acae-135">The sidecar pattern is often used with containers and referred to as a sidecar container or sidekick container.</span></span> 

## <a name="issues-and-considerations"></a><span data-ttu-id="7acae-136">Problemas y consideraciones</span><span class="sxs-lookup"><span data-stu-id="7acae-136">Issues and Considerations</span></span>

- <span data-ttu-id="7acae-137">Tenga en cuenta el formato de implementación y empaquetado que va a usar para implementar servicios, procesos o contenedores.</span><span class="sxs-lookup"><span data-stu-id="7acae-137">Consider the deployment and packaging format you will use to deploy services, processes, or containers.</span></span> <span data-ttu-id="7acae-138">Los contenedores se ajustan especialmente bien al patrón Sidecar.</span><span class="sxs-lookup"><span data-stu-id="7acae-138">Containers are particularly well suited to the sidecar pattern.</span></span>
- <span data-ttu-id="7acae-139">Al diseñar un servicio sidecar, decida con cuidado el mecanismo de comunicación entre procesos.</span><span class="sxs-lookup"><span data-stu-id="7acae-139">When designing a sidecar service, carefully decide on the interprocess communication mechanism.</span></span> <span data-ttu-id="7acae-140">Pruebe a utilizar tecnologías independiente del lenguaje o del marco, a menos que los requisitos de rendimiento hagan que no sea práctico.</span><span class="sxs-lookup"><span data-stu-id="7acae-140">Try to use language- or framework-agnostic technologies unless performance requirements make that impractical.</span></span>
- <span data-ttu-id="7acae-141">Antes de colocar la funcionalidad en un servicio sidecar, plantéese si funcionaría mejor como un servicio independiente o un demonio más tradicional.</span><span class="sxs-lookup"><span data-stu-id="7acae-141">Before putting functionality into a sidecar, consider whether it would work better as a separate service or a more traditional daemon.</span></span>
- <span data-ttu-id="7acae-142">Tenga también en cuenta si la funcionalidad se puede implementar como una biblioteca o mediante un mecanismo de extensión tradicional.</span><span class="sxs-lookup"><span data-stu-id="7acae-142">Also consider whether the functionality could be implemented as a library or using a traditional extension mechanism.</span></span> <span data-ttu-id="7acae-143">Las bibliotecas específicas del lenguaje pueden tener un mayor nivel de integración y menor sobrecarga de red.</span><span class="sxs-lookup"><span data-stu-id="7acae-143">Language-specific libraries may have a deeper level of integration and less network overhead.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="7acae-144">Cuándo se usa este patrón</span><span class="sxs-lookup"><span data-stu-id="7acae-144">When to Use this Pattern</span></span>

<span data-ttu-id="7acae-145">Use este patrón en los siguientes supuestos:</span><span class="sxs-lookup"><span data-stu-id="7acae-145">Use this pattern when:</span></span>

- <span data-ttu-id="7acae-146">La aplicación principal utiliza un conjunto heterogéneo de lenguajes y marcos.</span><span class="sxs-lookup"><span data-stu-id="7acae-146">Your primary application uses a heterogenous set of languages and frameworks.</span></span> <span data-ttu-id="7acae-147">Un componente que se encuentra en un servicio sidecar lo pueden usar aplicaciones escritas en otros lenguajes y que usen marcos diferentes.</span><span class="sxs-lookup"><span data-stu-id="7acae-147">A component located in a sidecar service can be consumed by applications written in different languages using different frameworks.</span></span>
- <span data-ttu-id="7acae-148">Un componente pertenece a un equipo remoto o a otra organización.</span><span class="sxs-lookup"><span data-stu-id="7acae-148">A component is owned by a remote team or a different organization.</span></span>
- <span data-ttu-id="7acae-149">Un componente o una característica deben encontrarse en el mismo host que la aplicación</span><span class="sxs-lookup"><span data-stu-id="7acae-149">A component or feature must be co-located on the same host as the application</span></span>
- <span data-ttu-id="7acae-150">Necesita un servicio que comparta el ciclo de vida general de la aplicación principal, pero que se pueda actualizar de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="7acae-150">You need a service that shares the overall lifecycle of your main application, but can be independently updated.</span></span>
- <span data-ttu-id="7acae-151">Necesita un control específico sobre los límites de recursos de un componente o recurso concreto.</span><span class="sxs-lookup"><span data-stu-id="7acae-151">You need fine-grained control over resource limits for a particular resource or component.</span></span> <span data-ttu-id="7acae-152">Por ejemplo, puede restringir la cantidad de memoria que usa un componente específico.</span><span class="sxs-lookup"><span data-stu-id="7acae-152">For example, you may want to restrict the amount of memory a specific component uses.</span></span> <span data-ttu-id="7acae-153">Puede implementar el componente como sidecar y administrar el uso de la memoria independientemente de la aplicación principal.</span><span class="sxs-lookup"><span data-stu-id="7acae-153">You can deploy the component as a sidecar and manage memory usage independently of the main application.</span></span>

<span data-ttu-id="7acae-154">Este patrón puede no ser adecuado:</span><span class="sxs-lookup"><span data-stu-id="7acae-154">This pattern may not be suitable:</span></span>

- <span data-ttu-id="7acae-155">Cuando debe optimizarse la comunicación entre procesos.</span><span class="sxs-lookup"><span data-stu-id="7acae-155">When interprocess communication needs to be optimized.</span></span> <span data-ttu-id="7acae-156">La comunicación entre una aplicación primaria y los servicios sidecar tiene cierta sobrecarga, en particular latencia en las llamadas.</span><span class="sxs-lookup"><span data-stu-id="7acae-156">Communication between a parent application and sidecar services includes some overhead, notably latency in the calls.</span></span> <span data-ttu-id="7acae-157">Es posible que esta contrapartida no sea aceptable para interfaces que emiten información.</span><span class="sxs-lookup"><span data-stu-id="7acae-157">This may not be an acceptable trade-off for chatty interfaces.</span></span>
- <span data-ttu-id="7acae-158">En el caso de aplicaciones pequeñas, en las que el costo, en términos de recursos, de implementar un servicio de sidecar por cada instancia no merece la pena, en comparación la ventaja del aislamiento.</span><span class="sxs-lookup"><span data-stu-id="7acae-158">For small applications where the resource cost of deploying a sidecar service for each instance is not worth the advantage of isolation.</span></span>
- <span data-ttu-id="7acae-159">Cuando el servicio necesita escalar de forma diferente a las aplicaciones principales, o independientemente de ellas.</span><span class="sxs-lookup"><span data-stu-id="7acae-159">When the service needs to scale differently than or independently from the main applications.</span></span> <span data-ttu-id="7acae-160">Si es así, es posible que sea mejor implementar la característica como un servicio independiente.</span><span class="sxs-lookup"><span data-stu-id="7acae-160">If so, it may be better to deploy the feature as a separate service.</span></span>

## <a name="example"></a><span data-ttu-id="7acae-161">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="7acae-161">Example</span></span>

<span data-ttu-id="7acae-162">Este patrón sidecar se puede aplicar a muchos escenarios.</span><span class="sxs-lookup"><span data-stu-id="7acae-162">The sidecar pattern is applicable to many scenarios.</span></span> <span data-ttu-id="7acae-163">Algunos ejemplos comunes:</span><span class="sxs-lookup"><span data-stu-id="7acae-163">Some common examples:</span></span>

- <span data-ttu-id="7acae-164">API de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="7acae-164">Infrastructure API.</span></span> <span data-ttu-id="7acae-165">El equipo de desarrollo de la infraestructura crea un servicio que se implementa junto con cada aplicación, en lugar de una biblioteca de cliente específica del lenguaje para acceder a la infraestructura.</span><span class="sxs-lookup"><span data-stu-id="7acae-165">The infrastructure development team creates a service that's deployed alongside each application, instead of a language-specific client library to access the infrastructure.</span></span> <span data-ttu-id="7acae-166">El servicio se carga como un sidecar y proporciona una capa común para los servicios de infraestructura, incluidos el registro, los datos del entorno, el almacén de configuración, la detección, las comprobaciones de mantenimiento y los servicios de vigilancia.</span><span class="sxs-lookup"><span data-stu-id="7acae-166">The service is loaded as a sidecar and provides a common layer for infrastructure services, including logging, environment data, configuration store, discovery, health checks, and watchdog services.</span></span> <span data-ttu-id="7acae-167">El sidecar también supervisa el entorno de host y el proceso (o contenedor) de la aplicación principal, y registra la información en un servicio centralizado.</span><span class="sxs-lookup"><span data-stu-id="7acae-167">The sidecar also monitors the parent application's host environment and process (or container) and logs the information to a centralized service.</span></span>
- <span data-ttu-id="7acae-168">Administración de NGINX/HAProxy.</span><span class="sxs-lookup"><span data-stu-id="7acae-168">Manage NGINX/HAProxy.</span></span> <span data-ttu-id="7acae-169">Implemente NGINX con un servicio sidecar que supervise el estado del entorno y, después, actualice el archivo de configuración de NGINX y recicle el proceso cuando se necesite un cambio de estado.</span><span class="sxs-lookup"><span data-stu-id="7acae-169">Deploy NGINX with a sidecar service that monitors environment state, then updates the NGINX configuration file and recycles the process when a change in state is needed.</span></span>
- <span data-ttu-id="7acae-170">Sidecar Ambassador.</span><span class="sxs-lookup"><span data-stu-id="7acae-170">Ambassador sidecar.</span></span> <span data-ttu-id="7acae-171">Implemente un servicio [Ambassador][ambassador] como un sidecar.</span><span class="sxs-lookup"><span data-stu-id="7acae-171">Deploy an [ambassador][ambassador] service as a sidecar.</span></span> <span data-ttu-id="7acae-172">La aplicación llama a través del servicio Ambassador, que controla el registro de solicitudes, enrutamiento, la interrupción de circuitos y otras características relacionadas con la conectividad.</span><span class="sxs-lookup"><span data-stu-id="7acae-172">The application calls through the ambassador, which handles request logging, routing, circuit breaking, and other connectivity related features.</span></span>
- <span data-ttu-id="7acae-173">Descarga de proxy.</span><span class="sxs-lookup"><span data-stu-id="7acae-173">Offload proxy.</span></span> <span data-ttu-id="7acae-174">Coloque un proxy NGINX delante de una instancia de servicio de node.js para controlar que se sirve el contenido del archivo estático para el servicio.</span><span class="sxs-lookup"><span data-stu-id="7acae-174">Place an NGINX proxy in front of a node.js service instance, to handle serving static file content for the service.</span></span>


## <a name="related-guidance"></a><span data-ttu-id="7acae-175">Instrucciones relacionadas</span><span class="sxs-lookup"><span data-stu-id="7acae-175">Related guidance</span></span>

- <span data-ttu-id="7acae-176">[Patrón Ambassador][ambassador]</span><span class="sxs-lookup"><span data-stu-id="7acae-176">[Ambassador pattern][ambassador]</span></span>


[ambassador]: ./ambassador.md

