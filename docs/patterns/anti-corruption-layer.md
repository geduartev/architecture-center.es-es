---
title: Patrón Anti-Corruption Layer
description: Implementa una capa de fachada o de adaptador entre una aplicación moderna y un sistema heredado.
author: dragon119
ms.date: 06/23/2017
ms.openlocfilehash: ac898519c9aa0a0aa2301da9f48756db0eb2af7c
ms.sourcegitcommit: f665226cec96ec818ca06ac6c2d83edb23c9f29c
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/16/2018
ms.locfileid: "31012375"
---
# <a name="anti-corruption-layer-pattern"></a><span data-ttu-id="96664-103">Patrón Anti-Corruption Layer</span><span class="sxs-lookup"><span data-stu-id="96664-103">Anti-Corruption Layer pattern</span></span>

<span data-ttu-id="96664-104">Implementar una capa de fachada o adaptador entre los diferentes subsistemas que no comparten la misma semántica.</span><span class="sxs-lookup"><span data-stu-id="96664-104">Implement a façade or adapter layer between different subsystems that don't share the same semantics.</span></span> <span data-ttu-id="96664-105">Esta capa traduce las solicitudes que un subsistema hace al otro subsistema.</span><span class="sxs-lookup"><span data-stu-id="96664-105">This layer translates requests that one subsystem makes to the other subsystem.</span></span> <span data-ttu-id="96664-106">Use este patrón para asegurarse de que el diseño de la aplicación no se vea limitado por dependencias de subsistemas externos.</span><span class="sxs-lookup"><span data-stu-id="96664-106">Use this pattern to ensure that an application's design is not limited by dependencies on outside subsystems.</span></span> <span data-ttu-id="96664-107">Eric Evans describió por primera vez este patrón en *Domain-Driven Design* (Diseño basado en dominios).</span><span class="sxs-lookup"><span data-stu-id="96664-107">This pattern was first described by Eric Evans in *Domain-Driven Design*.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="96664-108">Contexto y problema</span><span class="sxs-lookup"><span data-stu-id="96664-108">Context and problem</span></span>

<span data-ttu-id="96664-109">La mayoría de las aplicaciones dependen de otros sistemas para obtener determinados datos o funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="96664-109">Most applications rely on other systems for some data or functionality.</span></span> <span data-ttu-id="96664-110">Por ejemplo, cuando se migra una aplicación heredada a un sistema moderno, es posible que siga necesitando recursos heredados existentes.</span><span class="sxs-lookup"><span data-stu-id="96664-110">For example, when a legacy application is migrated to a modern system, it may still need existing legacy resources.</span></span> <span data-ttu-id="96664-111">Las nuevas características deben poder llamar al sistema heredado.</span><span class="sxs-lookup"><span data-stu-id="96664-111">New features must be able to call the legacy system.</span></span> <span data-ttu-id="96664-112">Esto ocurre especialmente con las migraciones graduales, donde diversas características de una aplicación mayor se trasladan a un sistema moderno con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="96664-112">This is especially true of gradual migrations, where different features of a larger application are moved to a modern system over time.</span></span>

<span data-ttu-id="96664-113">A menudo estos sistemas heredados experimentan problemas de calidad, como esquemas de datos convolucionados o API obsoletas.</span><span class="sxs-lookup"><span data-stu-id="96664-113">Often these legacy systems suffer from quality issues such as convoluted data schemas or obsolete APIs.</span></span> <span data-ttu-id="96664-114">Las características y tecnologías que se usan en sistemas heredados pueden variar ampliamente respecto a las empleadas en sistemas más modernos.</span><span class="sxs-lookup"><span data-stu-id="96664-114">The features and technologies used in legacy systems can vary widely from more modern systems.</span></span> <span data-ttu-id="96664-115">Para interoperar con el sistema heredado, puede que la nueva aplicación necesite admitir elementos no actualizados, como una infraestructura, protocolos, modelos de datos, API u otras características, que de lo contrario no incluiría en una aplicación moderna.</span><span class="sxs-lookup"><span data-stu-id="96664-115">To interoperate with the legacy system, the new application may need to support outdated infrastructure, protocols, data models, APIs, or other features that you wouldn't otherwise put into a modern application.</span></span>

<span data-ttu-id="96664-116">Mantener el acceso entre sistemas nuevos y heredados puede forzar al nuevo sistema a ajustarse a al menos algunas de las API o a una semántica distinta del sistema heredado.</span><span class="sxs-lookup"><span data-stu-id="96664-116">Maintaining access between new and legacy systems can force the new system to adhere to at least some of the legacy system's APIs or other semantics.</span></span> <span data-ttu-id="96664-117">Cuando estas características heredadas tienen problemas de calidad, al admitirlas se "corrompe" lo que, en caso contrario, podría ser una aplicación moderna con un diseño inmaculado.</span><span class="sxs-lookup"><span data-stu-id="96664-117">When these legacy features have quality issues, supporting them "corrupts" what might otherwise be a cleanly designed modern application.</span></span> 

<span data-ttu-id="96664-118">Pueden surgir problemas similares con cualquier sistema externo que su equipo de desarrollo no controle, no solo con sistemas heredados.</span><span class="sxs-lookup"><span data-stu-id="96664-118">Similar issues can arise with any external system that your development team doesn't control, not just legacy systems.</span></span> 

## <a name="solution"></a><span data-ttu-id="96664-119">Solución</span><span class="sxs-lookup"><span data-stu-id="96664-119">Solution</span></span>

<span data-ttu-id="96664-120">Para aislar los diferentes subsistemas, coloque una capa anticorrupción entre ellos.</span><span class="sxs-lookup"><span data-stu-id="96664-120">Isolate the different subsystems by placing an anti-corruption layer between them.</span></span> <span data-ttu-id="96664-121">Esta capa traduce las comunicaciones entre los dos sistemas, lo que permite a un sistema permanecer inalterado mientras que el otro evita poner el riesgo su diseño y su enfoque tecnológico.</span><span class="sxs-lookup"><span data-stu-id="96664-121">This layer translates communications between the two systems, allowing one system to remain unchanged while the other can avoid compromising its design and technological approach.</span></span>

![](./_images/anti-corruption-layer.png) 

<span data-ttu-id="96664-122">El diagrama anterior muestra una aplicación con dos subsistemas.</span><span class="sxs-lookup"><span data-stu-id="96664-122">The diagram above shows an application with two subsystems.</span></span> <span data-ttu-id="96664-123">El subsistema A llama al subsistema B a través de una capa anticorrupción.</span><span class="sxs-lookup"><span data-stu-id="96664-123">Subsystem A calls to subsystem B through an anti-corruption layer.</span></span> <span data-ttu-id="96664-124">La comunicación entre el subsistema A y la capa anticorrupción siempre usa el modelo de datos y la arquitectura del subsistema A. Las llamadas desde la capa anticorrupción al subsistema B se ajusta al modelo de datos o los métodos de ese subsistema.</span><span class="sxs-lookup"><span data-stu-id="96664-124">Communication between subsystem A and the anti-corruption layer always uses the data model and architecture of subsystem A. Calls from the anti-corruption layer to subsystem B conform to that subsystem's data model or methods.</span></span> <span data-ttu-id="96664-125">La capa para evitar daños contiene toda la lógica necesaria para traducir entre los dos sistemas.</span><span class="sxs-lookup"><span data-stu-id="96664-125">The anti-corruption layer contains all of the logic necessary to translate between the two systems.</span></span> <span data-ttu-id="96664-126">La capa puede implementarse como un componente dentro de la aplicación o como un servicio independiente.</span><span class="sxs-lookup"><span data-stu-id="96664-126">The layer can be implemented as a component within the application or as an independent service.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="96664-127">Problemas y consideraciones</span><span class="sxs-lookup"><span data-stu-id="96664-127">Issues and considerations</span></span>

- <span data-ttu-id="96664-128">La capa para evitar daños puede añadir latencia a las llamadas entre los dos sistemas.</span><span class="sxs-lookup"><span data-stu-id="96664-128">The anti-corruption layer may add latency to calls made between the two systems.</span></span>
- <span data-ttu-id="96664-129">La capa para evitar daños añade un servicio adicional que debe administrarse y mantenerse.</span><span class="sxs-lookup"><span data-stu-id="96664-129">The anti-corruption layer adds an additional service that must be managed and maintained.</span></span>
- <span data-ttu-id="96664-130">Tenga en cuenta cómo se escalará la capa para evitar daños.</span><span class="sxs-lookup"><span data-stu-id="96664-130">Consider how your anti-corruption layer will scale.</span></span>
- <span data-ttu-id="96664-131">Sopese si va a necesitar más de una capa para evitar daños.</span><span class="sxs-lookup"><span data-stu-id="96664-131">Consider whether you need more than one anti-corruption layer.</span></span> <span data-ttu-id="96664-132">Es posible que desee descomponer la funcionalidad en varios servicios con diferentes tecnologías o lenguajes o que, por otros motivos, desee crear particiones de la capa para evitar daños.</span><span class="sxs-lookup"><span data-stu-id="96664-132">You may want to decompose functionality into multiple services using different technologies or languages, or there may be other reasons to partition the anti-corruption layer.</span></span>
- <span data-ttu-id="96664-133">Tenga en cuenta cómo se administrará la capa para evitar daños en relación con sus otras aplicaciones o servicios.</span><span class="sxs-lookup"><span data-stu-id="96664-133">Consider how the anti-corruption layer will be managed in relation with your other applications or services.</span></span> <span data-ttu-id="96664-134">¿Cómo se integrará en sus procesos de supervisión, lanzamiento y configuración?</span><span class="sxs-lookup"><span data-stu-id="96664-134">How will it be integrated into your monitoring, release, and configuration processes?</span></span>
- <span data-ttu-id="96664-135">Asegúrese de mantener la coherencia de la transacción y los datos y de que se pueda supervisar.</span><span class="sxs-lookup"><span data-stu-id="96664-135">Make sure transaction and data consistency are maintained and can be monitored.</span></span>
- <span data-ttu-id="96664-136">Tenga en cuenta si será necesario que la capa anticorrupción administre todas las comunicaciones entre los diferentes subsistemas o solo un subconjunto de características.</span><span class="sxs-lookup"><span data-stu-id="96664-136">Consider whether the anti-corruption layer needs to handle all communication between different subsystems, or just a subset of features.</span></span> 
- <span data-ttu-id="96664-137">Si la capa anticorrupción es parte de una estrategia de migración de aplicaciones, considere si será permanente o se retirará después de migrar toda la funcionalidad heredada.</span><span class="sxs-lookup"><span data-stu-id="96664-137">If the anti-corruption layer is part of an application migration strategy, consider whether it will be permanent, or will be retired after all legacy functionality has been migrated.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="96664-138">Cuándo usar este patrón</span><span class="sxs-lookup"><span data-stu-id="96664-138">When to use this pattern</span></span>

<span data-ttu-id="96664-139">Use este patrón en los siguientes supuestos:</span><span class="sxs-lookup"><span data-stu-id="96664-139">Use this pattern when:</span></span>

- <span data-ttu-id="96664-140">Se haya planificado una migración en varias fases, pero deba mantenerse la integración entre el sistema nuevo y el heredado.</span><span class="sxs-lookup"><span data-stu-id="96664-140">A migration is planned to happen over multiple stages, but integration between new and legacy systems needs to be maintained.</span></span>
- <span data-ttu-id="96664-141">Dos o más subsistemas usan una semántica diferente, pero necesitan comunicarse.</span><span class="sxs-lookup"><span data-stu-id="96664-141">Two or more subsystems have different semantics, but still need to communicate.</span></span> 

<span data-ttu-id="96664-142">Este patrón puede no ser adecuado si no hay ninguna diferencia semántica importante entre el sistema nuevo y el heredado.</span><span class="sxs-lookup"><span data-stu-id="96664-142">This pattern may not be suitable if there are no significant semantic differences between new and legacy systems.</span></span> 

## <a name="related-guidance"></a><span data-ttu-id="96664-143">Instrucciones relacionadas</span><span class="sxs-lookup"><span data-stu-id="96664-143">Related guidance</span></span>

- [<span data-ttu-id="96664-144">Patrón Sustitución</span><span class="sxs-lookup"><span data-stu-id="96664-144">Strangler pattern</span></span>](./strangler.md)
