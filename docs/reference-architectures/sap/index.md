---
title: Implementación de SAP NetWeaver y SAP HANA en Azure
description: Prácticas probadas para ejecutar SAP HANA en un entorno de alta disponibilidad en Azure.
author: njray
ms.date: 06/29/2017
ms.openlocfilehash: 33171164c59a520a87ef3209c5bb1b208377221c
ms.sourcegitcommit: c441fd165e6bebbbbbc19854ec6f3676be9c3b25
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/30/2018
---
# <a name="deploy-sap-netweaver-and-sap-hana-on-azure"></a><span data-ttu-id="10483-103">Implementación de SAP NetWeaver y SAP HANA en Azure</span><span class="sxs-lookup"><span data-stu-id="10483-103">Deploy SAP NetWeaver and SAP HANA on Azure</span></span>

<span data-ttu-id="10483-104">Esta arquitectura de referencia muestra un conjunto de prácticas probadas para ejecutar SAP HANA en un entorno de alta disponibilidad en Azure.</span><span class="sxs-lookup"><span data-stu-id="10483-104">This reference architecture shows a set of proven practices for running SAP HANA in a high availability environment on Azure.</span></span> [<span data-ttu-id="10483-105">**Implemente esta solución**.</span><span class="sxs-lookup"><span data-stu-id="10483-105">**Deploy this solution**.</span></span>](#deploy-the-solution)

<span data-ttu-id="10483-106">![0][0]</span><span class="sxs-lookup"><span data-stu-id="10483-106">![0][0]</span></span>

<span data-ttu-id="10483-107">*Descargue un [archivo Visio][visio-download] de esta arquitectura.*</span><span class="sxs-lookup"><span data-stu-id="10483-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

> [!NOTE]
> <span data-ttu-id="10483-108">La implementación de esta arquitectura de referencia requiere licencias adecuadas de los productos de SAP y de otras tecnologías que no son de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="10483-108">Deploying this reference architecture requires appropriate licensing of SAP products and other non-Microsoft technologies.</span></span> <span data-ttu-id="10483-109">Para obtener información acerca de la asociación entre Microsoft y SAP, consulte [SAP HANA en Azure][sap-hana-on-azure].</span><span class="sxs-lookup"><span data-stu-id="10483-109">For information about the partnership between Microsoft and SAP, see [SAP HANA on Azure][sap-hana-on-azure].</span></span>

## <a name="architecture"></a><span data-ttu-id="10483-110">Architecture</span><span class="sxs-lookup"><span data-stu-id="10483-110">Architecture</span></span>

<span data-ttu-id="10483-111">La arquitectura consta de los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="10483-111">The architecture consists of the following components.</span></span>

- <span data-ttu-id="10483-112">**Red virtual**.</span><span class="sxs-lookup"><span data-stu-id="10483-112">**Virtual network (VNet)**.</span></span> <span data-ttu-id="10483-113">Una red virtual es una representación de una red aislada lógicamente en Azure.</span><span class="sxs-lookup"><span data-stu-id="10483-113">A VNet is a representation of a logically isolated network in Azure.</span></span> <span data-ttu-id="10483-114">Todas las máquinas virtuales de esta arquitectura de referencia se implementan en la misma red virtual.</span><span class="sxs-lookup"><span data-stu-id="10483-114">All of the VMs in this reference architecture are deployed to the same VNet.</span></span> <span data-ttu-id="10483-115">La red virtual se subdivide en subredes.</span><span class="sxs-lookup"><span data-stu-id="10483-115">The VNet is further subdivided into subnets.</span></span> <span data-ttu-id="10483-116">Cree una subred independiente para cada nivel, lo que incluye aplicación (SAP NetWeaver), base de datos (SAP HANA), administración (el Jumpbox) y Active Directory.</span><span class="sxs-lookup"><span data-stu-id="10483-116">Create a separate subnet for each tier, including application (SAP NetWeaver), database (SAP HANA), management (the jumpbox), and Active Directory.</span></span>

- <span data-ttu-id="10483-117">**Máquinas virtuales (VM)**.</span><span class="sxs-lookup"><span data-stu-id="10483-117">**Virtual machines (VMs)**.</span></span> <span data-ttu-id="10483-118">Las máquinas virtuales de esta arquitectura se agrupan en varios niveles distintos.</span><span class="sxs-lookup"><span data-stu-id="10483-118">The VMs for this architecture are grouped into several distinct tiers.</span></span>

    - <span data-ttu-id="10483-119">**SAP NetWeaver**.</span><span class="sxs-lookup"><span data-stu-id="10483-119">**SAP NetWeaver**.</span></span> <span data-ttu-id="10483-120">Incluye SAP ASCS, SAP Web Dispatcher y los servidores de aplicaciones SAP.</span><span class="sxs-lookup"><span data-stu-id="10483-120">Includes SAP ASCS, SAP Web Dispatcher, and the SAP application servers.</span></span> 
    
    - <span data-ttu-id="10483-121">**SAP HANA**.</span><span class="sxs-lookup"><span data-stu-id="10483-121">**SAP HANA**.</span></span> <span data-ttu-id="10483-122">Esta arquitectura de referencia usa SAP HANA para el nivel de base de datos, que se ejecuta en una sola instancia de [GS5][vm-sizes-mem].</span><span class="sxs-lookup"><span data-stu-id="10483-122">This reference architecture uses SAP HANA for the database tier, running on a single [GS5][vm-sizes-mem] instance.</span></span> <span data-ttu-id="10483-123">SAP HANA está certificado para cargas de trabajo de OLAP de producción en GS5 o [SAP HANA en instancias grandes de Azure][azure-large-instances].</span><span class="sxs-lookup"><span data-stu-id="10483-123">SAP HANA is certified for production OLAP workloads on GS5 or [SAP HANA on Azure Large Instances][azure-large-instances].</span></span> <span data-ttu-id="10483-124">Esta arquitectura de referencia es para máquinas virtuales de Azure de las series G y M.</span><span class="sxs-lookup"><span data-stu-id="10483-124">This reference architecture is for Azure virtual machines in the G-series and M-series.</span></span> <span data-ttu-id="10483-125">Para obtener información acerca de SAP HANA en instancias grandes de Azure, consulte [Introducción y arquitectura de SAP HANA en Azure (instancias grandes)][azure-large-instances].</span><span class="sxs-lookup"><span data-stu-id="10483-125">For information about SAP HANA on Azure Large Instances, see [SAP HANA (large instances) overview and architecture on Azure][azure-large-instances].</span></span>
   
    - <span data-ttu-id="10483-126">**Jumpbox**.</span><span class="sxs-lookup"><span data-stu-id="10483-126">**Jumpbox**.</span></span> <span data-ttu-id="10483-127">También se denomina bastion host.</span><span class="sxs-lookup"><span data-stu-id="10483-127">Also called a bastion host.</span></span> <span data-ttu-id="10483-128">Se trata de una máquina virtual segura en la red que los administradores utilizan para conectarse a las restantes máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="10483-128">This is a secure VM on the network that administrators use to connect to the other VMs.</span></span> 
     
    - <span data-ttu-id="10483-129">**Controladores de dominio de Windows Server Active Directory (AD)**</span><span class="sxs-lookup"><span data-stu-id="10483-129">**Windows Server Active Directory (AD) domain controllers.**</span></span> <span data-ttu-id="10483-130">Los controladores de dominio se utilizan para configurar el clúster de conmutación por error de Windows Server (véase a continuación).</span><span class="sxs-lookup"><span data-stu-id="10483-130">The domain controllers are used to configure the Windows Server Failover Cluster (see below).</span></span>
 
- <span data-ttu-id="10483-131">**Conjuntos de disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="10483-131">**Availability sets**.</span></span> <span data-ttu-id="10483-132">Coloque las máquinas virtuales para los roles de SAP ACSC, el servidor de aplicaciones de SAP y SAP Web Dispatcher en conjuntos de disponibilidad independientes y aprovisione al menos dos máquinas virtuales para cada rol.</span><span class="sxs-lookup"><span data-stu-id="10483-132">Place the VMs for the SAP Web Dispatcher, SAP application server, and SAP ACSC roles into separate availability sets, and provision at least two VMs for each role.</span></span> <span data-ttu-id="10483-133">Esto hace que las máquinas virtuales sean aptas para un Acuerdo de Nivel de Servicio (SLA) mayor.</span><span class="sxs-lookup"><span data-stu-id="10483-133">This makes the VMs eligible for a higher service level agreement (SLA).</span></span>
    
- <span data-ttu-id="10483-134">**NIC**.</span><span class="sxs-lookup"><span data-stu-id="10483-134">**NICs.**</span></span> <span data-ttu-id="10483-135">Las máquinas virtuales que ejecutan SAP NetWeaver y SAP HANA requieren dos interfaces de red (NIC).</span><span class="sxs-lookup"><span data-stu-id="10483-135">The VMs that run SAP NetWeaver and SAP HANA require two network interfaces (NICs).</span></span> <span data-ttu-id="10483-136">Cada NIC se asigna a una subred diferente, con el fin de separar los distintos tipos de tráfico.</span><span class="sxs-lookup"><span data-stu-id="10483-136">Each NIC is assigned to a different subnet, to segregate different types of traffic.</span></span> <span data-ttu-id="10483-137">Para más información, consulte la sección [Recomendaciones](#recommendations) a continuación.</span><span class="sxs-lookup"><span data-stu-id="10483-137">See [Recommendations](#recommendations) below for more information.</span></span>

- <span data-ttu-id="10483-138">**Clúster de conmutación por error de Windows Server**.</span><span class="sxs-lookup"><span data-stu-id="10483-138">**Windows Server Failover Cluster**.</span></span> <span data-ttu-id="10483-139">Las máquinas virtuales que ejecutan SAP ACSC están configuradas como clúster de conmutación por error para lograr una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="10483-139">The VMs that run SAP ACSC are configured as a failover cluster for high availability.</span></span> <span data-ttu-id="10483-140">Para admitir el clúster de conmutación por error, SIOS DataKeeper Cluster Edition realiza la función de volumen compartido de clúster (CSV) mediante la replicación de discos independientes que pertenecen a los nodos del clúster.</span><span class="sxs-lookup"><span data-stu-id="10483-140">To support the failover cluster, SIOS DataKeeper Cluster Edition performs the cluster shared volume (CSV) function by replicating independent disks owned by the cluster nodes.</span></span> <span data-ttu-id="10483-141">Para más información, consulte [Running SAP applications on the Microsoft platform][running-sap] (Ejecución de aplicaciones SAP en la plataforma de Microsoft).</span><span class="sxs-lookup"><span data-stu-id="10483-141">For details, see [Running SAP applications on the Microsoft platform][running-sap].</span></span>
    
- <span data-ttu-id="10483-142">**Equilibradores de carga.**</span><span class="sxs-lookup"><span data-stu-id="10483-142">**Load balancers.**</span></span> <span data-ttu-id="10483-143">Se usan dos instancias de [Azure Load Balancer][azure-lb].</span><span class="sxs-lookup"><span data-stu-id="10483-143">Two [Azure Load Balancer][azure-lb] instances are used.</span></span> <span data-ttu-id="10483-144">La primera, que se muestra a la izquierda del diagrama, distribuye el tráfico a las máquinas virtuales de SAP Web Dispatcher.</span><span class="sxs-lookup"><span data-stu-id="10483-144">The first, shown on the left of the diagram, distributes traffic to the SAP Web Dispatcher VMs.</span></span> <span data-ttu-id="10483-145">Esta configuración implementa la opción de distribuidor web en paralelo que se describe en [High Availability of the SAP Web Dispatcher (Alta disponibilidad de SAP Web Dispatcher)][sap-dispatcher-ha].</span><span class="sxs-lookup"><span data-stu-id="10483-145">This configuration implements the parallel web dispatcher option described in [High Availability of the SAP Web Dispatcher][sap-dispatcher-ha].</span></span> <span data-ttu-id="10483-146">El segundo equilibrador de carga, que se muestra a la derecha, habilita la conmutación por error en el clúster de conmutación por error de Windows Server, para lo que dirige las conexiones entrantes al nodo activo/correcto.</span><span class="sxs-lookup"><span data-stu-id="10483-146">The second load balancer, shown on the right, enables failover in the Windows Server Failover Cluster, by directing incoming connections to the active/healthy node.</span></span>

- <span data-ttu-id="10483-147">**VPN Gateway.**</span><span class="sxs-lookup"><span data-stu-id="10483-147">**VPN Gateway.**</span></span> <span data-ttu-id="10483-148">VPN Gateway extiende su red local a la red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="10483-148">The VPN Gateway extends your on-premises network to the Azure VNet.</span></span> <span data-ttu-id="10483-149">También puede usar ExpressRoute, que utiliza una conexión privada dedicada que no pasa por la red Internet pública.</span><span class="sxs-lookup"><span data-stu-id="10483-149">You can also use ExpressRoute, which uses a dedicated private connection that does not go over the public Internet.</span></span> <span data-ttu-id="10483-150">La solución de ejemplo no implementa la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="10483-150">The example solution does not deploy the gateway.</span></span> <span data-ttu-id="10483-151">Para más información, consulte [Connect an on-premises network to Azure][hybrid-networking] (Conexión de una red local a Azure).</span><span class="sxs-lookup"><span data-stu-id="10483-151">For more information, see [Connect an on-premises network to Azure][hybrid-networking].</span></span>

## <a name="recommendations"></a><span data-ttu-id="10483-152">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="10483-152">Recommendations</span></span>

<span data-ttu-id="10483-153">Los requisitos pueden diferir de los de la arquitectura que se describe aquí.</span><span class="sxs-lookup"><span data-stu-id="10483-153">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="10483-154">Use estas recomendaciones como punto de partida.</span><span class="sxs-lookup"><span data-stu-id="10483-154">Use these recommendations as a starting point.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="10483-155">Equilibradores de carga</span><span class="sxs-lookup"><span data-stu-id="10483-155">Load balancers</span></span>

<span data-ttu-id="10483-156">[SAP Web Dispatcher][sap-dispatcher] controla el equilibrio de carga del tráfico HTTP(S) en los servidores de doble pila (ABAP y Java).</span><span class="sxs-lookup"><span data-stu-id="10483-156">[SAP Web Dispatcher][sap-dispatcher] handles load balancing of HTTP(S) traffic to dual-stack servers (ABAP and Java).</span></span> <span data-ttu-id="10483-157">Durante años SAP ha propugnado servidores de aplicaciones de una sola pila, por lo que en la actualidad muy pocas aplicaciones se ejecutan en un modelo de implementación de pila doble.</span><span class="sxs-lookup"><span data-stu-id="10483-157">SAP has advocated single-stack application servers for years, so very few applications run on a dual-stack deployment model nowadays.</span></span> <span data-ttu-id="10483-158">La instancia de Azure Load Balancer que se muestra en el diagrama de la arquitectura implementa el clúster de alta disponibilidad para SAP Web Dispatcher.</span><span class="sxs-lookup"><span data-stu-id="10483-158">The Azure load balancer shown in the architecture diagram implements the high availability cluster for the SAP Web Dispatcher.</span></span>

<span data-ttu-id="10483-159">El equilibrio de carga del tráfico que llega a los servidores de aplicaciones se controla en SAP.</span><span class="sxs-lookup"><span data-stu-id="10483-159">Load balancing of traffic to the application servers is handled within SAP.</span></span> <span data-ttu-id="10483-160">En el caso del tráfico de los clientes SAPGUI que se conectan a un servidor de SAP a través de DIAG y llamadas a funciones remotas (RFC), el servidor de mensajes SCS equilibra la carga mediante la creación de [grupos de inicio de sesión][logon-groups] del servidor de aplicaciones de SAP.</span><span class="sxs-lookup"><span data-stu-id="10483-160">For traffic from SAPGUI clients connecting to a SAP server via DIAG and Remote Function Calls (RFC), the SCS message server balances the load by creating SAP App Server [Logon Groups][logon-groups].</span></span> 

<span data-ttu-id="10483-161">SMLG es una transacción de SAP ABAP que se usa para administrar la funcionalidad de equilibrio de carga del inicio de sesión de los servicios centrales de SAP.</span><span class="sxs-lookup"><span data-stu-id="10483-161">SMLG is an SAP ABAP transaction used to manage the logon load balancing capability of SAP Central Services.</span></span> <span data-ttu-id="10483-162">El grupo de back-end del grupo de inicio de sesión tiene más de un servidor de aplicaciones de ABAP.</span><span class="sxs-lookup"><span data-stu-id="10483-162">The backend pool of the logon group has more than one ABAP application server.</span></span> <span data-ttu-id="10483-163">Los clientes que acceden a los servicios de clúster de ASCS se conectan a Azure Load Balancer a través de una dirección IP de front-end.</span><span class="sxs-lookup"><span data-stu-id="10483-163">Clients accessing ASCS cluster services connect to the Azure load balancer through a frontend IP address.</span></span> <span data-ttu-id="10483-164">El nombre de red virtual del clúster de ASCS también tiene una dirección IP.</span><span class="sxs-lookup"><span data-stu-id="10483-164">The ASCS cluster virtual network name also has an IP address.</span></span> <span data-ttu-id="10483-165">Si lo desea, esta dirección puede asociarse a una dirección IP adicional en Azure Load Balancer, con el fin de que el clúster se puede administrar de forma remota.</span><span class="sxs-lookup"><span data-stu-id="10483-165">Optionally, this address can be associated with an additional IP address on the Azure load balancer, so that the cluster can be managed remotely.</span></span>  

### <a name="nics"></a><span data-ttu-id="10483-166">Tarjetas de red</span><span class="sxs-lookup"><span data-stu-id="10483-166">NICs</span></span>

<span data-ttu-id="10483-167">Las funciones de administración del entorno de SAP requieren separación del tráfico del servidor en diferentes tarjetas de red.</span><span class="sxs-lookup"><span data-stu-id="10483-167">SAP landscape management functions require segregation of server traffic on different NICs.</span></span> <span data-ttu-id="10483-168">Por ejemplo, los datos empresariales se deben separar tanto del tráfico administrativo como del de copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="10483-168">For example, business data should be separated from administrative traffic and backup traffic.</span></span> <span data-ttu-id="10483-169">La asignación de varias tarjetas de red a diferentes subredes permite esta separación de datos.</span><span class="sxs-lookup"><span data-stu-id="10483-169">Assigning multiple NICs to different subnets enables this data segregation.</span></span> <span data-ttu-id="10483-170">Para más información, consulte "Red" en el documento [Building High Availability for SAP NetWeaver and SAP HANA][sap-ha] (Creación de alta disponibilidad para SAP NetWeaver y SAP HANA) (en PDF).</span><span class="sxs-lookup"><span data-stu-id="10483-170">For more information, see "Network" in [Building High Availability for SAP NetWeaver and SAP HANA][sap-ha] (PDF).</span></span>

<span data-ttu-id="10483-171">Asigne la tarjeta de red de administración a la subred de administración y la tarjeta de red de comunicación de datos a otra subred.</span><span class="sxs-lookup"><span data-stu-id="10483-171">Assign the administration NIC to the management subnet, and assign the data communication NIC to a separate subnet.</span></span> <span data-ttu-id="10483-172">Para ver los detalles de la configuración, consulte [Creación y administración de una máquina virtual Windows que tiene varias tarjetas de red][multiple-vm-nics].</span><span class="sxs-lookup"><span data-stu-id="10483-172">For configuration details, see [Create and manage a Windows virtual machine that has multiple NICs][multiple-vm-nics].</span></span>

### <a name="azure-storage"></a><span data-ttu-id="10483-173">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="10483-173">Azure Storage</span></span>

<span data-ttu-id="10483-174">Con todas las máquinas virtuales del servidor de bases de datos, se recomienda utilizar Azure Premium Storage para que la latencia de lectura y escritura sea consistente.</span><span class="sxs-lookup"><span data-stu-id="10483-174">With all database server VMs, we recommend using Azure Premium Storage for consistent read/write latency.</span></span> <span data-ttu-id="10483-175">En el caso de los servidores de aplicaciones de SAP, incluidas las máquinas virtuales (A)SCS, puede usar Azure Standard Storage, ya que la ejecución de la aplicación tiene lugar en la memoria y solo utiliza discos para el registro.</span><span class="sxs-lookup"><span data-stu-id="10483-175">For SAP application servers, including the (A)SCS virtual machines, you can use Azure Standard Storage, because application execution takes place in memory and uses disks for logging only.</span></span>

<span data-ttu-id="10483-176">Para lograr la máxima confiabilidad, se recomienda usar [Azure Managed Disks][managed-disks].</span><span class="sxs-lookup"><span data-stu-id="10483-176">For best reliability, we recommend using [Azure Managed Disks][managed-disks].</span></span> <span data-ttu-id="10483-177">Los discos administrados garantizan que los discos de las máquinas virtuales de un conjunto de disponibilidad estén aislados, con el fin de evitar únicos puntos de error.</span><span class="sxs-lookup"><span data-stu-id="10483-177">Managed disks ensure that the disks for VMs within an availability set are isolated to avoid single points of failure.</span></span>

> [!NOTE]
> <span data-ttu-id="10483-178">Actualmente la plantilla de Resource Manager para esta arquitectura de referencia no usa discos administrados,</span><span class="sxs-lookup"><span data-stu-id="10483-178">Currently the Resource Manager template for this reference architecture does not use managed disks.</span></span> <span data-ttu-id="10483-179">pero está previsto actualizarla para que los use.</span><span class="sxs-lookup"><span data-stu-id="10483-179">We are planning to update the template to use managed disks.</span></span>

<span data-ttu-id="10483-180">Para lograr un rendimiento del ancho de banda de disco y un IOPS altos, las prácticas habituales de optimización del rendimiento del volumen de almacenamiento se aplican al diseño de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="10483-180">To achieve high IOPS and disk bandwidth throughput, the common practices in storage volume performance optimization apply to Azure storage layout.</span></span> <span data-ttu-id="10483-181">Por ejemplo, la unión de varios discos para crear un volumen de disco mayor mejora el rendimiento de E/S.</span><span class="sxs-lookup"><span data-stu-id="10483-181">For example, striping multiple disks together to create a larger disk volume improves IO performance.</span></span> <span data-ttu-id="10483-182">La habilitación de la caché de lectura en el contenido de almacenamiento que cambia con poca frecuencia mejora la velocidad de recuperación de datos.</span><span class="sxs-lookup"><span data-stu-id="10483-182">Enabling the read cache on storage content that changes infrequently enhances the speed of data retrieval.</span></span> <span data-ttu-id="10483-183">Para más información acerca de los requisitos de rendimiento, consulte [SAP note 1943937 - Hardware Configuration Check Tool][sap-1943937] (SAP nota 1943937: Herramienta de comprobación de la configuración del hardware).</span><span class="sxs-lookup"><span data-stu-id="10483-183">For details about performance requirements, see [SAP note 1943937 - Hardware Configuration Check Tool][sap-1943937].</span></span>

<span data-ttu-id="10483-184">Para el almacén de datos de copia de seguridad, se recomienda utilizar el [nivel de almacenamiento de acceso esporádico][cool-blob-storage] de Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="10483-184">For the backup data store, we recommend using the [cool storage tier][cool-blob-storage] of Azure Blob storage.</span></span> <span data-ttu-id="10483-185">El nivel de almacenamiento de acceso esporádico es una forma rentable de almacenar los datos a los que se accede con menos frecuencia y son de larga duración.</span><span class="sxs-lookup"><span data-stu-id="10483-185">The cool storage tier is a cost-effective way to store data that is less frequently accessed and long-lived.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="10483-186">Consideraciones sobre escalabilidad</span><span class="sxs-lookup"><span data-stu-id="10483-186">Scalability considerations</span></span>

<span data-ttu-id="10483-187">En el nivel de aplicación de SAP, Azure ofrece una amplia variedad de tamaños de máquina virtual para el escalado vertical.</span><span class="sxs-lookup"><span data-stu-id="10483-187">At the SAP application layer, Azure offers a wide range of virtual machine sizes for scaling up.</span></span> <span data-ttu-id="10483-188">Para ver una lista inclusiva, consulte [SAP note 1928533 - Applications on Azure: Supported Products and Azure VM types][sap-1928533] (SAP nota 1928533: Aplicaciones de SAP en Azure: tipos de máquina virtual de Azure y productos compatibles).</span><span class="sxs-lookup"><span data-stu-id="10483-188">For an inclusive list, see [SAP note 1928533 - SAP Applications on Azure: Supported Products and Azure VM Types][sap-1928533].</span></span> <span data-ttu-id="10483-189">Realice un escalado horizontal mediante la adición de más máquinas virtuales al conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="10483-189">Scale out by adding more VMs to the availability set.</span></span>

<span data-ttu-id="10483-190">En el caso de SAP HANA en máquinas virtuales de Azure con aplicaciones OLTP y OLAP SAP, el tamaño de la máquina virtual con certificación SAP es GS5 con una sola instancia de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="10483-190">For SAP HANA on Azure virtual machines with both OLTP and OLAP SAP applications, the SAP-certified virtual machine size is GS5 with a single VM instance.</span></span> <span data-ttu-id="10483-191">Para cargas de trabajo mayores, Microsoft también ofrece [Azure Large Instances][azure-large-instances] para SAP HANA en servidores físicos que están en la misma ubicación que un centro de datos con certificación de Microsoft Azure, que proporciona un máximo de 4 TB de capacidad de memoria para una sola instancia en este momento.</span><span class="sxs-lookup"><span data-stu-id="10483-191">For larger workloads, Microsoft also offers [Azure Large Instances][azure-large-instances] for SAP HANA on physical servers co-located in a Microsoft Azure certified datacenter, which provides up to 4 TB of memory capacity for a single instance at this time.</span></span> <span data-ttu-id="10483-192">La configuración con varios nodos también es posible con una capacidad de memoria total de hasta 32 TB.</span><span class="sxs-lookup"><span data-stu-id="10483-192">Multi-node configuration is also possible with a total memory capacity of up to 32 TB.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="10483-193">Consideraciones sobre disponibilidad</span><span class="sxs-lookup"><span data-stu-id="10483-193">Availability considerations</span></span>

<span data-ttu-id="10483-194">En esta instalación distribuida de la aplicación de SAP en una base de datos centralizada, la instalación base se replica para lograr una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="10483-194">In this distributed installation of the SAP application on a centralized database, the base installation is replicated to achieve high availability.</span></span> <span data-ttu-id="10483-195">Para cada capa de la arquitectura, el diseño de la alta disponibilidad varía:</span><span class="sxs-lookup"><span data-stu-id="10483-195">For each layer of the architecture, the high availability design varies:</span></span>

- <span data-ttu-id="10483-196">**Web Dispatcher**.</span><span class="sxs-lookup"><span data-stu-id="10483-196">**Web Dispatcher.**</span></span> <span data-ttu-id="10483-197">La alta disponibilidad se logra con instancias de SAP Web Dispatcher redundantes con tráfico de la aplicación de SAP.</span><span class="sxs-lookup"><span data-stu-id="10483-197">High availability is achieved with redundant SAP Web Dispatcher instances with SAP application traffic.</span></span> <span data-ttu-id="10483-198">Vea [SAP Web Dispatcher][swd] en la documentación de SAP.</span><span class="sxs-lookup"><span data-stu-id="10483-198">See [SAP Web Dispatcher][swd] in the SAP Documentation.</span></span>

- <span data-ttu-id="10483-199">**ASCS.**</span><span class="sxs-lookup"><span data-stu-id="10483-199">**ASCS.**</span></span> <span data-ttu-id="10483-200">Para lograr alta disponibilidad de ASCS en máquinas virtuales Windows de Azure, se usa Windows Sever Failover Clustering con SIOS DataKeeper para implementar el volumen compartido del clúster.</span><span class="sxs-lookup"><span data-stu-id="10483-200">For high availability of ASCS on Azure Windows virtual machines, Windows Sever Failover Clustering is used with SIOS DataKeeper to implement the cluster shared volume.</span></span> <span data-ttu-id="10483-201">Para obtener detalles acerca de la implementación, consulte [Clustering SAP ASCS on Azure][clustering] (Agrupación de SAP ASCS en clústeres en Azure).</span><span class="sxs-lookup"><span data-stu-id="10483-201">For implementation details, see [Clustering SAP ASCS on Azure][clustering].</span></span>

- <span data-ttu-id="10483-202">**Servidores de aplicaciones.**</span><span class="sxs-lookup"><span data-stu-id="10483-202">**Application servers.**</span></span> <span data-ttu-id="10483-203">La alta disponibilidad se logra mediante el equilibrio de la carga de tráfico dentro de un grupo de servidores de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="10483-203">High availability is achieved by load balancing traffic within a pool of application servers.</span></span>

- <span data-ttu-id="10483-204">**Nivel de base de datos.**</span><span class="sxs-lookup"><span data-stu-id="10483-204">**Database tier.**</span></span> <span data-ttu-id="10483-205">Esta arquitectura de referencia implementa una única instancia de base de datos de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="10483-205">This reference architecture deploys a single SAP HANA database instance.</span></span> <span data-ttu-id="10483-206">Para lograr alta disponibilidad, implemente más de una instancia y utilice la replicación del de HANA (HSR) para implementar la conmutación por error manual.</span><span class="sxs-lookup"><span data-stu-id="10483-206">For high availability, deploy more than one instance and use HANA System Replication (HSR) to implement manual failover.</span></span> <span data-ttu-id="10483-207">Para habilitar la conmutación automática por error, se requiere una extensión HA para la distribución específica de Linux.</span><span class="sxs-lookup"><span data-stu-id="10483-207">To enable automatic failover, an HA extension for the specific Linux distribution is required.</span></span>

### <a name="disaster-recovery-considerations"></a><span data-ttu-id="10483-208">Consideraciones acerca de la recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="10483-208">Disaster recovery considerations</span></span>

<span data-ttu-id="10483-209">Cada nivel utiliza una estrategia diferente para proporcionar protección mediante la recuperación ante desastres (DR).</span><span class="sxs-lookup"><span data-stu-id="10483-209">Each tier uses a different strategy to provide disaster recovery (DR) protection.</span></span>

- <span data-ttu-id="10483-210">**Servidores de aplicaciones.**</span><span class="sxs-lookup"><span data-stu-id="10483-210">**Application servers.**</span></span> <span data-ttu-id="10483-211">Los servidores de aplicaciones de SAP no contienen datos empresariales.</span><span class="sxs-lookup"><span data-stu-id="10483-211">SAP application servers don't contain business data.</span></span> <span data-ttu-id="10483-212">En Azure, una estrategia de recuperación ante desastres simple es crear servidores de aplicaciones SAP en otra región.</span><span class="sxs-lookup"><span data-stu-id="10483-212">On Azure, a simple DR strategy is to create SAP application servers in another region.</span></span> <span data-ttu-id="10483-213">Tras cualquier cambio de configuración o actualización del kernel en el servidor de aplicaciones principal, los mismos cambios se deben copiar a las máquinas virtuales de la región de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="10483-213">Upon any configuration changes or kernel updates on the primary application server, the same changes must be copied to VMs in the DR region.</span></span> <span data-ttu-id="10483-214">Por ejemplo, los archivos ejecutables de kernel se copian en las máquinas virtuales de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="10483-214">For example, the kernel executables copied to the DR VMs.</span></span>

- <span data-ttu-id="10483-215">**Servicios centrales de SAP.**</span><span class="sxs-lookup"><span data-stu-id="10483-215">**SAP Central Services.**</span></span> <span data-ttu-id="10483-216">Este componente de la pila de aplicaciones SAP tampoco conserva los datos empresariales.</span><span class="sxs-lookup"><span data-stu-id="10483-216">This component of the SAP application stack also doesn't persist business data.</span></span> <span data-ttu-id="10483-217">Puede crear una máquina virtual en la región de la DR para que ejecute el rol de SCS.</span><span class="sxs-lookup"><span data-stu-id="10483-217">You can build a VM in the DR region to run the SCS role.</span></span> <span data-ttu-id="10483-218">El único contenido del nodo de SCS principal que se sincroniza es el del recurso compartido **/sapmnt**.</span><span class="sxs-lookup"><span data-stu-id="10483-218">The only content from the primary SCS node to synchronize is the **/sapmnt** share content.</span></span> <span data-ttu-id="10483-219">Además, si los cambios de configuración o las actualizaciones del kernel tienen lugar en los servidores de SCS principales, se deben repetir en el SCS de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="10483-219">Also, if configuration changes or kernel updates take place on the primary SCS servers, they must be repeated on the DR SCS.</span></span> <span data-ttu-id="10483-220">Para sincronizar los dos servidores, no hay más que usar un trabajo de copia programado regularmente para copiar **/sapmnt** a la parte de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="10483-220">To synchronize the two servers, simply use a regularly scheduled copy job to copy **/sapmnt** to the DR side.</span></span> <span data-ttu-id="10483-221">Para más información acerca del proceso de compilación, copia y conmutación por error de prueba, descargue [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution][sap-netweaver-dr] (SAP NetWeaver: creación de una solución de recuperación ante desastres basada en Hyper-V y Microsoft Azure) y consulte "4.3.</span><span class="sxs-lookup"><span data-stu-id="10483-221">For details about the build, copy, and test failover process, download [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution][sap-netweaver-dr], and refer to "4.3.</span></span> <span data-ttu-id="10483-222">Capa de SAP SPOF (ASCS)."</span><span class="sxs-lookup"><span data-stu-id="10483-222">SAP SPOF layer (ASCS)."</span></span>

- <span data-ttu-id="10483-223">**Nivel de base de datos.**</span><span class="sxs-lookup"><span data-stu-id="10483-223">**Database tier.**</span></span> <span data-ttu-id="10483-224">Use soluciones de replicación compatibles con HANA como HSR o Replicación de Storage.</span><span class="sxs-lookup"><span data-stu-id="10483-224">Use HANA-supported replication solutions such as HSR or Storage Replication.</span></span> 

## <a name="manageability-considerations"></a><span data-ttu-id="10483-225">Consideraciones sobre la manejabilidad</span><span class="sxs-lookup"><span data-stu-id="10483-225">Manageability considerations</span></span>

<span data-ttu-id="10483-226">SAP HANA tiene una característica de copia de seguridad que usa la infraestructura subyacente de Azure.</span><span class="sxs-lookup"><span data-stu-id="10483-226">SAP HANA has a backup feature that uses the underlying Azure infrastructure.</span></span> <span data-ttu-id="10483-227">Para hacer una copia de seguridad de la base de datos de SAP HANA que se ejecuta en las máquinas virtuales de Azure, tanto la instantánea de SAP HANA como la de Azure Storage se usan para asegurar la coherencia de los archivos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="10483-227">To back up the SAP HANA database running on Azure virtual machines, both the SAP HANA snapshot and Azure storage snapshot are used to ensure the consistency of backup files.</span></span> <span data-ttu-id="10483-228">Para más información, consulte [Guía de copia de seguridad de SAP HANA en Azure Virtual Machines][hana-backup] y [Preguntas sobre el servicio Azure Backup][backup-faq].</span><span class="sxs-lookup"><span data-stu-id="10483-228">For details, see [Backup guide for SAP HANA on Azure Virtual Machines][hana-backup] and the [Azure Backup service FAQ][backup-faq].</span></span>

<span data-ttu-id="10483-229">Azure proporciona varias funciones para la [supervisión y el diagnóstico][monitoring] de la infraestructura global.</span><span class="sxs-lookup"><span data-stu-id="10483-229">Azure provides several functions for [monitoring and diagnostics][monitoring] of the overall infrastructure.</span></span> <span data-ttu-id="10483-230">Además, la supervisión mejorada de las máquinas virtuales de Azure (Linux o Windows) la controla Azure Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="10483-230">Also, enhanced monitoring of Azure virtual machines (Linux or Windows) is handled by Azure Operations Management Suite (OMS).</span></span>

<span data-ttu-id="10483-231">Para proporcionar una supervisión basada en SAP de los recursos y un rendimiento del servicio de la infraestructura de SAP, utilice la extensión de Azure SAP Enhanced Monitoring.</span><span class="sxs-lookup"><span data-stu-id="10483-231">To provide SAP-based monitoring of resources and service performance of the SAP infrastructure, use the Azure SAP Enhanced Monitoring extension.</span></span> <span data-ttu-id="10483-232">Esta extensión introduce las estadísticas de supervisión de Azure en la aplicación de SAP para la supervisión de sistema operativo y las funciones de DBA Cockpit.</span><span class="sxs-lookup"><span data-stu-id="10483-232">This extension feeds Azure monitoring statistics into the SAP application for operating system monitoring and DBA Cockpit functions.</span></span> 

## <a name="security-considerations"></a><span data-ttu-id="10483-233">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="10483-233">Security considerations</span></span>

<span data-ttu-id="10483-234">SAP tiene su propio motor de administración de usuarios (UME) para controlar el acceso basado en rol y la autorización en la aplicación de SAP.</span><span class="sxs-lookup"><span data-stu-id="10483-234">SAP has its own Users Management Engine (UME) to control role-based access and authorization within the SAP application.</span></span> <span data-ttu-id="10483-235">Para más información, consulte [SAP HANA Security - An Overview][sap-security] (Introducción a la seguridad de SAP HANA)</span><span class="sxs-lookup"><span data-stu-id="10483-235">For details, see [SAP HANA Security - An Overview][sap-security].</span></span> <span data-ttu-id="10483-236">(para acceder se requiere una cuenta de SAP Service Marketplace).</span><span class="sxs-lookup"><span data-stu-id="10483-236">(A SAP Service Marketplace account is required for access.)</span></span>

<span data-ttu-id="10483-237">Por la seguridad de la infraestructura, los datos se protegen tanto en tránsito como en reposo.</span><span class="sxs-lookup"><span data-stu-id="10483-237">For infrastructure security, data is safeguarded in transit and at rest.</span></span> <span data-ttu-id="10483-238">La sección "Security considerations" (Consideraciones de seguridad) de [SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide][netweaver-on-azure] (empieza a afrontar la seguridad de la red).</span><span class="sxs-lookup"><span data-stu-id="10483-238">The “Security considerations” section of the [SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide][netweaver-on-azure] begins to address network security.</span></span> <span data-ttu-id="10483-239">La guía también especifica los puertos de red que se deben abrir en los firewalls para permitir la comunicación de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="10483-239">The guide also specifies the network ports you must open on the firewalls to allow application communication.</span></span> 

<span data-ttu-id="10483-240">Para cifrar discos de una máquina virtual IaaS Windows y Linux, puede usar [Azure Disk Encryption][disk-encryption].</span><span class="sxs-lookup"><span data-stu-id="10483-240">To encrypt Windows and Linux IaaS virtual machine disks, you can use [Azure Disk Encryption][disk-encryption].</span></span> <span data-ttu-id="10483-241">Azure Disk Encryption usa la característica BitLocker de Windows y la característica DM-Crypt de Linux para ofrecer cifrado de volúmenes al sistema operativo y a los discos de datos.</span><span class="sxs-lookup"><span data-stu-id="10483-241">Azure Disk Encryption uses the BitLocker feature of Windows and the DM-Crypt feature of Linux to provide volume encryption for the operating system and the data disks.</span></span> <span data-ttu-id="10483-242">La solución también funciona con Azure Key Vault para ayudarle a controlar y administrar las claves y los secretos del cifrado de discos en la suscripción de Key Vault.</span><span class="sxs-lookup"><span data-stu-id="10483-242">The solution also works with Azure Key Vault to help you control and manage the disk-encryption keys and secrets in your Key Vault subscription.</span></span> <span data-ttu-id="10483-243">Los datos de los discos de máquinas virtuales se cifran en reposo en Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="10483-243">Data on the virtual machine disks are encrypted at rest in your Azure storage.</span></span>

<span data-ttu-id="10483-244">Para el cifrado de datos en reposo de SAP HANA, se recomienda utilizar la tecnología de cifrado nativa de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="10483-244">For SAP HANA data-at-rest encryption, we recommend using the SAP HANA native encryption technology.</span></span>

> [!NOTE]
> <span data-ttu-id="10483-245">No utilice el cifrado de datos en reposo de HANA con el cifrado de disco de Azure en el mismo servidor.</span><span class="sxs-lookup"><span data-stu-id="10483-245">Don't use the HANA data-at-rest encryption with Azure disk encryption on the same server.</span></span>

<span data-ttu-id="10483-246">Considere la posibilidad de usar [grupos de seguridad de red][nsg] (NSG) para restringir el tráfico entre las distintas subredes de la red virtual.</span><span class="sxs-lookup"><span data-stu-id="10483-246">Consider using [network security groups][nsg] (NSGs) to restrict traffic between the various subnets in the VNet.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="10483-247">Implementación de la solución</span><span class="sxs-lookup"><span data-stu-id="10483-247">Deploy the solution</span></span> 

<span data-ttu-id="10483-248">Los scripts de implementación de esta arquitectura de referencia están disponibles en [GitHub][github].</span><span class="sxs-lookup"><span data-stu-id="10483-248">The deployment scripts for this reference architecture are available on [GitHub][github].</span></span>


### <a name="prerequisites"></a><span data-ttu-id="10483-249">requisitos previos</span><span class="sxs-lookup"><span data-stu-id="10483-249">Prerequisites</span></span>

- <span data-ttu-id="10483-250">Para completar la instalación, es preciso tener acceso al centro de descarga de software de SAP.</span><span class="sxs-lookup"><span data-stu-id="10483-250">You must have access to the SAP Software Download Center to complete the installation.</span></span>
 
- <span data-ttu-id="10483-251">Instale la versión más reciente de [Azure PowerShell][azure-ps].</span><span class="sxs-lookup"><span data-stu-id="10483-251">Install the latest version of [Azure PowerShell][azure-ps].</span></span> 

- <span data-ttu-id="10483-252">Esta implementación requiere 51 núcleos.</span><span class="sxs-lookup"><span data-stu-id="10483-252">This deployment requires 51 cores.</span></span> <span data-ttu-id="10483-253">Antes de realizar la implementación, compruebe que la suscripción tiene cuota suficiente para los núcleos de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="10483-253">Before deploying, verify that your subscription has sufficient quota for VM cores.</span></span> <span data-ttu-id="10483-254">Si no la tiene, use Azure Portal para enviar una solicitud de más cuota al soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="10483-254">If not, use the Azure portal to submit a support request for more quota.</span></span>
 
- <span data-ttu-id="10483-255">Esta implementación utiliza una máquina virtual de la serie GS.</span><span class="sxs-lookup"><span data-stu-id="10483-255">This deployment uses a GS-series VM.</span></span> <span data-ttu-id="10483-256">Compruebe la disponibilidad de la serie GS por región [aquí][region-availability].</span><span class="sxs-lookup"><span data-stu-id="10483-256">Check the availability of the GS series per region [here][region-availability].</span></span>

- <span data-ttu-id="10483-257">Para calcular el costo de esta implementación, consulte la [Calculadora de precios de Azure][azure-pricing].</span><span class="sxs-lookup"><span data-stu-id="10483-257">To estimate the cost of this deployment, see the [Azure Pricing Calculator][azure-pricing].</span></span> 
 
<span data-ttu-id="10483-258">Esta arquitectura de referencia implementa las siguientes máquinas virtuales:</span><span class="sxs-lookup"><span data-stu-id="10483-258">This reference architecture deploys the following VMs:</span></span>

| <span data-ttu-id="10483-259">Nombre del recurso</span><span class="sxs-lookup"><span data-stu-id="10483-259">Resource name</span></span> | <span data-ttu-id="10483-260">Tamaño de VM</span><span class="sxs-lookup"><span data-stu-id="10483-260">VM Size</span></span> | <span data-ttu-id="10483-261">Propósito</span><span class="sxs-lookup"><span data-stu-id="10483-261">Purpose</span></span>  |
|---------------|---------|----------|
| <span data-ttu-id="10483-262">`ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`</span><span class="sxs-lookup"><span data-stu-id="10483-262">`ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`</span></span> | <span data-ttu-id="10483-263">DS11v2</span><span class="sxs-lookup"><span data-stu-id="10483-263">DS11v2</span></span> | <span data-ttu-id="10483-264">Servicios centrales de SAP</span><span class="sxs-lookup"><span data-stu-id="10483-264">SAP Central Services</span></span> |
| <span data-ttu-id="10483-265">`ra-sapApps-vm1` ... `ra-sapApps-vmN`</span><span class="sxs-lookup"><span data-stu-id="10483-265">`ra-sapApps-vm1` ... `ra-sapApps-vmN`</span></span> | <span data-ttu-id="10483-266">DS11v2</span><span class="sxs-lookup"><span data-stu-id="10483-266">DS11v2</span></span> | <span data-ttu-id="10483-267">Aplicación SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="10483-267">SAP NetWeaver application</span></span> |
| <span data-ttu-id="10483-268">`ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`</span><span class="sxs-lookup"><span data-stu-id="10483-268">`ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`</span></span> | <span data-ttu-id="10483-269">DS11v2</span><span class="sxs-lookup"><span data-stu-id="10483-269">DS11v2</span></span> | <span data-ttu-id="10483-270">SAP Web Dispatcher</span><span class="sxs-lookup"><span data-stu-id="10483-270">SAP Web Dispatcher</span></span> |
| `ra-sap-data-vm1` | <span data-ttu-id="10483-271">GS5</span><span class="sxs-lookup"><span data-stu-id="10483-271">GS5</span></span> | <span data-ttu-id="10483-272">Instancia de base de datos de SAP HANA</span><span class="sxs-lookup"><span data-stu-id="10483-272">SAP HANA database instance</span></span> |
| `ra-sap-jumpbox-vm1` | <span data-ttu-id="10483-273">DS1V2</span><span class="sxs-lookup"><span data-stu-id="10483-273">DS1V2</span></span> | <span data-ttu-id="10483-274">Jumpbox</span><span class="sxs-lookup"><span data-stu-id="10483-274">Jumpbox</span></span> |

<span data-ttu-id="10483-275">Se implementa una única instancia de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="10483-275">A single SAP HANA instance is deployed.</span></span> <span data-ttu-id="10483-276">En el caso de las máquinas virtuales de aplicación, el número de instancias que se van implementar se especifica en los parámetros de la plantilla.</span><span class="sxs-lookup"><span data-stu-id="10483-276">For the application VMs, the number of instances to deploy is specified in the template parameters.</span></span>

### <a name="deploy-sap-infrastructure"></a><span data-ttu-id="10483-277">Implementación de la infraestructura de SAP</span><span class="sxs-lookup"><span data-stu-id="10483-277">Deploy SAP infrastructure</span></span>

<span data-ttu-id="10483-278">Esta arquitectura se puede implementar de forma incremental o toda de una vez.</span><span class="sxs-lookup"><span data-stu-id="10483-278">You can deploy this architecture incrementally or all at once.</span></span> <span data-ttu-id="10483-279">La primera vez se recomienda realizar una implementación incremental, con el fin de poder ver lo que hace cada implementación.</span><span class="sxs-lookup"><span data-stu-id="10483-279">The first time, we recommend an incremental deployment, so that you can see what each deployment step does.</span></span> <span data-ttu-id="10483-280">Especifique el incremento mediante uno de los siguientes parámetros de *modo*</span><span class="sxs-lookup"><span data-stu-id="10483-280">Specify the increment using one of the following *mode* parameters</span></span>

| <span data-ttu-id="10483-281">Mode</span><span class="sxs-lookup"><span data-stu-id="10483-281">Mode</span></span>           | <span data-ttu-id="10483-282">Qué hace</span><span class="sxs-lookup"><span data-stu-id="10483-282">What it does</span></span>                                                                                                            |
|----------------|-----------------------------------------------------|
| <span data-ttu-id="10483-283">infrastructure</span><span class="sxs-lookup"><span data-stu-id="10483-283">infrastructure</span></span> | <span data-ttu-id="10483-284">Implementa la infraestructura de red en Azure.</span><span class="sxs-lookup"><span data-stu-id="10483-284">Deploys the network infrastructure in Azure.</span></span>        |
| <span data-ttu-id="10483-285">carga de trabajo</span><span class="sxs-lookup"><span data-stu-id="10483-285">workload</span></span>       | <span data-ttu-id="10483-286">Implementa los servidores de SAP en la red.</span><span class="sxs-lookup"><span data-stu-id="10483-286">Deploys the SAP servers to the network.</span></span>             |
| <span data-ttu-id="10483-287">todas</span><span class="sxs-lookup"><span data-stu-id="10483-287">all</span></span>            | <span data-ttu-id="10483-288">Implementa todas las implementaciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="10483-288">Deploys all the preceding deployments.</span></span>              |

<span data-ttu-id="10483-289">Para implementar la solución, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="10483-289">To deploy the solution, perform the following steps:</span></span>

1. <span data-ttu-id="10483-290">Descargue o clone el [repositorio de GitHub][github] en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="10483-290">Download or clone the [GitHub repo][github] to your local computer.</span></span>

2. <span data-ttu-id="10483-291">Abra una ventana de PowerShell y navegue hasta la carpeta `/sap/sap-hana/`.</span><span class="sxs-lookup"><span data-stu-id="10483-291">Open a PowerShell window and navigate to the `/sap/sap-hana/` folder.</span></span>

3. <span data-ttu-id="10483-292">Ejecute el siguiente cmdlet de PowerShell.</span><span class="sxs-lookup"><span data-stu-id="10483-292">Run the following PowerShell cmdlet.</span></span> <span data-ttu-id="10483-293">Para `<subscription id>`, use el identificador de su suscripción a Azure.</span><span class="sxs-lookup"><span data-stu-id="10483-293">For `<subscription id>`, use your Azure subscription ID.</span></span> <span data-ttu-id="10483-294">Para `<location>`, especifique una región de Azure, como `eastus` o `westus`.</span><span class="sxs-lookup"><span data-stu-id="10483-294">For `<location>`, specify an Azure region, such as `eastus` or `westus`.</span></span> <span data-ttu-id="10483-295">Para `<mode>`, especifique uno de los modos enumerados anteriormente.</span><span class="sxs-lookup"><span data-stu-id="10483-295">For `<mode>`, specify one of the modes listed above.</span></span>

    ```powershell
     .\Deploy-ReferenceArchitecture -SubscriptionId <subscription id> -Location <location> -ResourceGroupName <resource group> <mode>
    ```

4.  <span data-ttu-id="10483-296">Cuando se le solicite, inicie sesión en su cuenta de Azure.</span><span class="sxs-lookup"><span data-stu-id="10483-296">When prompted, log on to your Azure account.</span></span> 

<span data-ttu-id="10483-297">Los scripts de implementación pueden tardar varias horas en completarse, según el modo seleccionado.</span><span class="sxs-lookup"><span data-stu-id="10483-297">The deployment scripts can take up to several hours to complete, depending on the mode you selected.</span></span>

> [!WARNING]
> <span data-ttu-id="10483-298">Los archivos de parámetros incluyen una contraseña codificada de forma rígida (`AweS0me@PW`) en varios lugares.</span><span class="sxs-lookup"><span data-stu-id="10483-298">The parameter files include a hard-coded password (`AweS0me@PW`) in various places.</span></span> <span data-ttu-id="10483-299">Cambie estos valores antes de realizar la implementación.</span><span class="sxs-lookup"><span data-stu-id="10483-299">Change these values before you deploy.</span></span>
 
### <a name="configure-sap-applications-and-database"></a><span data-ttu-id="10483-300">Configurar la base de datos y aplicaciones de SAP</span><span class="sxs-lookup"><span data-stu-id="10483-300">Configure SAP applications and database</span></span>

<span data-ttu-id="10483-301">Después de implementar la infraestructura de SAP, instale y configure las aplicaciones de SAP y la base de datos de HANA en las máquinas virtuales como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="10483-301">After deploying the SAP infrastructure, install and configure your SAP applications and HANA database on the virtual machines as follows.</span></span>

> [!NOTE]
> <span data-ttu-id="10483-302">Para obtener instrucciones de instalación de SAP, debe tener el nombre de usuario y la contraseña del Portal de SAP Support para descargar las [guías de instalación de SAP][sap-guide].</span><span class="sxs-lookup"><span data-stu-id="10483-302">For SAP installation instructions, you must have a SAP Support Portal username and password to download the [SAP installation guides][sap-guide].</span></span>

1. <span data-ttu-id="10483-303">Inicie sesión en el Jumpbox (`ra-sap-jumpbox-vm1`).</span><span class="sxs-lookup"><span data-stu-id="10483-303">Log into the jumpbox (`ra-sap-jumpbox-vm1`).</span></span> <span data-ttu-id="10483-304">El Jumpbox lo usará para iniciar sesión en las otras máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="10483-304">You will use the jumpbox to log into the other VMs.</span></span> 

2.  <span data-ttu-id="10483-305">En todas las máquinas virtuales denominadas `ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`, inicie sesión en la máquina virtual e instale y configure la instancia de SAP Web Dispatcher siguiendo los pasos que se describen en la wiki [Web Dispatcher Installation][sap-dispatcher-install].</span><span class="sxs-lookup"><span data-stu-id="10483-305">For each VM named `ra-sap-wdp-vm1` ... `ra-sap-wdp-vmN`, log into the VM, and install and configure the SAP Web Dispatcher instance using the steps described in the [Web Dispatcher Installation][sap-dispatcher-install] wiki.</span></span>

3.  <span data-ttu-id="10483-306">Inicie sesión en la máquina virtual denominada `ra-sap-data-vm1`.</span><span class="sxs-lookup"><span data-stu-id="10483-306">Log into the VM named `ra-sap-data-vm1`.</span></span> <span data-ttu-id="10483-307">Instale y configure la instancia de SAP Hana Database mediante la guía [SAP HANA Server Installation and Update Guide][hana-guide].</span><span class="sxs-lookup"><span data-stu-id="10483-307">Install and configure the SAP Hana Database instance using the [SAP HANA Server Installation and Update Guide][hana-guide].</span></span>

4. <span data-ttu-id="10483-308">En todas las máquinas virtuales denominadas `ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`, inicie sesión en la máquina virtual e instale y configure los servicios centrales de SAP mediante la [guías de instalación de SAP][sap-guide].</span><span class="sxs-lookup"><span data-stu-id="10483-308">For each VM named `ra-sapApps-scs-vm1` ... `ra-sapApps-scs-vmN`, log into the VM, and install and configure the SAP Central Services (SCS) using the [SAP installation guides][sap-guide].</span></span>

5.  <span data-ttu-id="10483-309">En todas las máquinas virtuales denominadas `ra-sapApps-vm1` ... `ra-sapApps-vmN`, inicie sesión en la máquina virtual e instale y configure la aplicación SAP Netweaver mediante la [guías de instalación de SAP][sap-guide].</span><span class="sxs-lookup"><span data-stu-id="10483-309">For each VM named `ra-sapApps-vm1` ... `ra-sapApps-vmN`, log into the VM, and install and configure the SAP NetWeaver application using the [SAP installation guides][sap-guide].</span></span>

<span data-ttu-id="10483-310">**_Colaboradores de esta arquitectura de referencia_**  &mdash; Rick Rainey, Ross Sponholtz, Ben Trinh</span><span class="sxs-lookup"><span data-stu-id="10483-310">**_Contributors to this reference architecture_** &mdash; Rick Rainey, Ross Sponholtz, Ben Trinh</span></span>

[azure-large-instances]: /azure/virtual-machines/workloads/sap/hana-overview-architecture
[azure-lb]: /azure/load-balancer/load-balancer-overview
[azure-pricing]: https://azure.microsoft.com/pricing/calculator/
[azure-ps]: /powershell/azure/overview
[backup-faq]: /azure/backup/backup-azure-backup-faq
[clustering]: https://blogs.msdn.microsoft.com/saponsqlserver/2015/05/20/clustering-sap-ascs-instance-using-windows-server-failover-cluster-on-microsoft-azure-with-sios-datakeeper-and-azure-internal-load-balancer/
[cool-blob-storage]: /azure/storage/storage-blob-storage-tiers
[disk-encryption]: /azure/security/azure-security-disk-encryption
[github]: https://github.com/mspnp/reference-architectures/tree/master/sap/sap-hana
[hana-backup]: /azure/virtual-machines/workloads/sap/sap-hana-backup-guide
[hana-guide]: https://help.sap.com/viewer/2c1988d620e04368aa4103bf26f17727/2.0.01/en-US/7eb0167eb35e4e2885415205b8383584.html
[hybrid-networking]: ../hybrid-networking/index.md
[logon-groups]: https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing
[managed-disks]: /azure/storage/storage-managed-disks-overview
[monitoring]: /azure/architecture/best-practices/monitoring
[multiple-vm-nics]: /azure/virtual-machines/windows/multiple-nics
[netweaver-on-azure]: /azure/virtual-machines/workloads/sap/planning-guide
[nsg]: /azure/virtual-network/virtual-networks-nsg
[region-availability]: https://azure.microsoft.com/regions/services/
[running-SAP]: https://blogs.msdn.microsoft.com/saponsqlserver/2016/06/07/sap-on-sql-general-update-for-customers-partners-june-2016/
[sap-1943937]: https://launchpad.support.sap.com/#/notes/1943937
[sap-1928533]: https://launchpad.support.sap.com/#/notes/1928533
[sap-dispatcher]: https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm
[sap-dispatcher-ha]: https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/9a9a6b48c673e8e10000000a42189b/frameset.htm
[sap-dispatcher-install]: https://wiki.scn.sap.com/wiki/display/SI/Web+Dispatcher+Installation
[sap-guide]: https://service.sap.com/instguides
[sap-ha]: https://support.sap.com/content/dam/SAAP/SAP_Activate/AGS_70.pdf
[sap-hana-on-azure]: https://azure.microsoft.com/services/virtual-machines/sap-hana/
[sap-netweaver-dr]: http://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx
[sap-security]: https://archive.sap.com/documents/docs/DOC-62943
[visio-download]: https://archcenter.blob.core.windows.net/cdn/SAP-HANA-architecture.vsdx
[vm-sizes-mem]: /azure/virtual-machines/windows/sizes-memory
[swd]: https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm
[0]: ./images/sap-hana.png "Arquitectura de SAP HANA mediante Microsoft Azure"
